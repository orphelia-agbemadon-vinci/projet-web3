<% if (tasks.length === 0) { %>
    <p>Liste vide</p>
<% } else { %>
    <table class="todolist" id="task-list">
        <% tasks.forEach((task, index) => { %>
            <tr>
                <!-- Colonne pour le texte de la tâche -->
                <td class="check-box">
                    <input
                        type="checkbox" 
                        id="task-<%= index %>" 
                        <%= task.completed ? 'checked' : '' %>
                        hx-post="/tasks/toggle-complete/<%= index %>" 
                        hx-target="#task-list" 
                        hx-swap="innerHTML">
                </td>
                <!-- Colonne pour le texte de la tâche avec condition pour barrer le texte -->
                <td class="task-col <%= task.completed ? 'completed' : '' %>">
                    <label for="task-<%= index %>">
                        <a href="/tasks/<%= index %>"><%= task.description %></a>
                    </label>
                </td>
                <!-- Menu déroulant pour chaque tâche -->
                <td>
                    <select class="assign-list-dropdown" name="listId" hx-post="/tasks/assign-list/<%= index %>" hx-target="#task-list" hx-swap="innerHTML">
                        <option value="">-- Assigner à une liste --</option>
                        <% lists.forEach(list => { %>
                            <option value="<%= list.id %>" <%= task.listId === list.id ? 'selected' : '' %>><%= list.name %></option>
                        <% }); %>
                    </select>
                </td>
                <!-- Colonne pour le bouton "Modifier" -->
                <td>
                    <a 
                        class="edit-button" 
                        hx-get="/tasks/edit/<%= index %>" 
                        hx-target="closest tr" 
                        hx-swap="innerHTML">
                        <i class="fa fa-pencil"></i>
                    </a>
                </td>
                <!-- Colonne pour le bouton "Important" -->
                <td>
                    <a
                        class="star-button"
                        hx-post="/tasks/toggle-important/<%= index %>" 
                        hx-target="#task-list" 
                        hx-swap="innerHTML">
                        <i class="fa <%= task.important ? 'fa-star' : 'fa-star-o' %>"></i>
                    </a>
                </td>
                <!-- Colonne pour le bouton "Supprimer" -->
                <td class="">
                    <button class="delete-button"
                        hx-delete="/tasks/delete/<%= index %>" 
                        hx-target="#task-list" 
                        hx-swap="innerHTML">
                        <i class="fa fa-trash"></i>
                    </button>
                </td>
            </tr>
        <% }); %>
    </table>
<% } %>